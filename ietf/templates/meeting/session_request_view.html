{# Copyright The IETF Trust 2025, All Rights Reserved #}
{% extends "base.html" %}
{% load static ietf_filters django_bootstrap5 %}
{% block title %}Session Request{% endblock %}
    
{% block content %}
    <h1 class="">Session Request - IETF {{ meeting.number }}</h1>

    <div class="d-flex mb-3">
      <a href="https://www.ietf.org/chairs/session-request-tool-instructions/" class="me-3 btn btn-primary" target="_blank">Instructions</a>
    </div>

    <hr>

    <div class="view-container">

        {% include "meeting/session_request_view_table.html" %}

        <hr>

        <h2>Activities Log</h2>
        <div class="">
            <table class=" table table-sm full-width">
                <thead>
                    <tr>
                        <th scope="col">Date</th>
                        <th scope="col">Time</th>
                        <th scope="col">Action</th>
                        <th scope="col">Name</th>
                    </tr>
                </thead>
                <tbody>
                    {% for entry in activities %}
                        <tr class="{% cycle 'row1' 'row2' %}">
                            <td>{{ entry.act_date }}</td>
                            <td>{{ entry.act_time }}</td>
                            <td>{{ entry.activity }}</td>
                            <td>{{ entry.act_by }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>


      <button type="button" name="edit" class="btn btn-primary me-2" onclick="window.location='{% url 'ietf.meeting.views_session_request.edit_request' acronym=group.acronym num=meeting.number %}'"{% if not can_edit %} disabled{% endif %}>Edit</button>
      {% if show_approve_button %}
        <a href="{% url 'ietf.meeting.views_session_request.approve_request' acronym=group.acronym %}" class="btn btn-primary me-2">Approve Third Session</a>
      {% endif %}
      <button type="button" class="btn btn-primary me-2" onclick="if (window.confirm('Do you really want to cancel this session?')) { window.location='{% url 'ietf.meeting.views_session_request.cancel_request' acronym=group.acronym %}' };" {% if not can_cancel %} disabled{% endif %}>Cancel this Request</button>
      <a href="{% url 'ietf.meeting.views_session_request.list_view' %}" class="btn btn-secondary float-end">Back</a>
  
    </div> <!-- view-container -->

{% endblock %}

{% block js %}

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Find the first .row inside .content
            const firstRow = document.querySelector('.view-container .row');

            if (firstRow) {
                // Get the parent element to find all sibling rows
                const parent = firstRow.parentElement;
                
                // Get all .row elements that are immediate children of the same parent
                const allRows = Array.from(parent.children).filter(child => child.classList.contains('row'));
                
                // Apply striping - add bg_light to every other row (starting with index 1)
                allRows.forEach((row, index) => {
                    // Remove any existing bg_light class first
                    row.classList.remove('bg-light');
                    
                    // Add bg_light to odd-indexed rows (0-based, so 1, 3, 5, etc.)
                    if (index % 2 === 1) {
                        row.classList.add('bg-light');
                    }
                });
            }
        });
    </script>
{% endblock %}